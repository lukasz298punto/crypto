import{r,p as T,j as e,d as m,z as v,B as b}from"./index-DwYHCt07.js";import{u as E,F as I,C as U,N as F,V as x,K as t,H as L,a as p}from"./useWord-CdxOG12R.js";import{u as P}from"./useSettingsDb-D1oE0WAS.js";import{c as B,S as i,T as g}from"./useTranslation-D0ElvFKS.js";import{C as K,a as z}from"./CardContent-BET2l6Vy.js";import{A}from"./Alert-DWIesk2y.js";import"./IconButton-DrsGSIKw.js";import"./createSvgIcon-DkbpZzzk.js";import"./useSlot-Dq2s2VGO.js";const D=window.SpeechRecognition||window.webkitSpeechRecognition,n=new D;n.continuous=!1;n.interimResults=!1;function Q(){const{t:l}=B(),[h,c]=r.useState(!1),[a,d]=r.useState(""),{language:u}=P(),{currentWord:s,nextWord:f,skip:w,check:j,reset:y,lang:o,nativeLang:C,isCorrect:k}=E(),N=r.useCallback(()=>{n.start(),n.lang=o===T.En?"en-US":"pl-PL",n.onresult=S=>{const R=S.results[0][0].transcript;d(R)},n.onend=()=>{c(!1)},n.onerror=()=>{c(!1)},n.onstart=()=>{c(!0)}},[o]);return r.useEffect(()=>()=>{n.stop()},[]),r.useEffect(()=>{a&&j(a)},[j,a]),s?e.jsx(U,{maxWidth:"md",children:e.jsx(K,{className:"p-2",children:e.jsx(z,{children:e.jsxs(i,{alignItems:"center",justifyContent:"center",children:[e.jsxs(i,{direction:"row",alignItems:"center",children:[e.jsx(F,{word:(s==null?void 0:s.word)+` (${s==null?void 0:s.wordDesc})`}),e.jsx(x,{name:s.word,keyCode:t.One,language:C})]}),e.jsxs(i,{direction:"row",alignItems:"center",className:m("mb-2 h-[45px]",{"opacity-0":!a}),children:[e.jsx(g,{variant:"h5",color:"text.secondary",children:s.translation}),a&&e.jsx(x,{name:s.translation,keyCode:t.Two,language:o,autoPlay:!0})]}),a&&e.jsx(e.Fragment,{children:e.jsx(A,{severity:k?"success":"error",className:"h-[56px] w-full xy-center",children:a})}),!a&&e.jsxs(i,{gap:1,direction:"row",alignItems:"center",className:m("h-[56px]",{"opacity-0":!h}),children:[e.jsx(v,{size:20}),e.jsx(g,{children:l("Trwa nagrywanie dźwięku...")})]}),e.jsx(b,{className:m({"opacity-0":!a}),children:(s==null?void 0:s.exampleUsedTranslation)&&e.jsxs(i,{className:"mt-1",direction:"row",alignItems:"center",children:[e.jsx(L,{text:s==null?void 0:s.exampleUsedTranslation,trans:u===o?s.translation:s.word}),e.jsx(x,{name:s==null?void 0:s.exampleUsedTranslation,keyCode:t.Four,language:o})]})}),(s==null?void 0:s.exampleUsed)&&e.jsx(g,{className:"mb-2",color:"text.secondary",variant:"body2",align:"center",children:s==null?void 0:s.exampleUsed}),a?e.jsxs(e.Fragment,{children:[e.jsx(p,{keyCode:t.Enter,className:"w-full flex-1",variant:"contained",onClick:()=>{f(),d("")},children:l("Następne słowo")}),e.jsx(p,{className:"mt-1 w-full",variant:"contained",color:"secondary",onClick:()=>{w(),d("")},keyCode:t.S,children:l("Znam to")})]}):e.jsx(i,{className:"w-full",direction:"row",gap:1,children:e.jsx(p,{disabled:h,keyCode:t.Enter,className:"flex-1",variant:"contained",onClick:N,children:l("Nagraj")})})]})})})}):e.jsx(I,{onReset:y})}export{Q as default};
