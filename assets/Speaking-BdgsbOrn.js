import{r as l,o as T,j as s,d as m,z as v,B as b}from"./index-DhXWF6dC.js";import{u as E,F as I,C as U,N as F,V as x,K as t,H as L,a as p}from"./useWord-C0lORHXh.js";import{u as P}from"./useSettingsDb-BhUnpR-v.js";import{c as B,S as i,T as g}from"./useTranslation-BX8TAh5h.js";import{C as D,a as K}from"./CardContent-DO1DZDNL.js";import{A as z}from"./Alert-DtGMTgAC.js";import"./IconButton-kZZItAzu.js";import"./createSvgIcon-DJHynAx5.js";import"./useSlot-DNXsfClF.js";const A=window.SpeechRecognition||window.webkitSpeechRecognition,n=new A;n.continuous=!1;n.interimResults=!1;function Q(){const{t:r}=B(),[h,c]=l.useState(!1),[a,d]=l.useState(""),{language:f}=P(),{currentWord:e,nextWord:u,skip:w,check:j,reset:y,lang:o,nativeLang:C,isCorrect:k}=E(),N=l.useCallback(()=>{n.start(),n.lang=o===T.En?"en-US":"pl-PL",n.onresult=S=>{const R=S.results[0][0].transcript;d(R)},n.onend=()=>{c(!1)},n.onerror=()=>{c(!1)},n.onstart=()=>{c(!0)}},[o]);return l.useEffect(()=>()=>{n.stop()},[]),l.useEffect(()=>{a&&j(a)},[j,a]),e?s.jsx(U,{maxWidth:"md",children:s.jsx(D,{className:"p-2",children:s.jsx(K,{children:s.jsxs(i,{alignItems:"center",justifyContent:"center",children:[s.jsxs(i,{direction:"row",alignItems:"center",children:[s.jsx(F,{word:(e==null?void 0:e.word)+(e!=null&&e.wordDesc?` (${e==null?void 0:e.wordDesc})`:"")}),s.jsx(x,{name:e.word,keyCode:t.One,language:C})]}),s.jsxs(i,{direction:"row",alignItems:"center",className:m("mb-2 h-[45px]",{"opacity-0":!a}),children:[s.jsx(g,{variant:"h5",color:"text.secondary",children:e.translation}),a&&s.jsx(x,{name:e.translation,keyCode:t.Two,language:o,autoPlay:!0})]}),a&&s.jsx(s.Fragment,{children:s.jsx(z,{severity:k?"success":"error",className:"h-[56px] w-full xy-center",children:a})}),!a&&s.jsxs(i,{gap:1,direction:"row",alignItems:"center",className:m("h-[56px]",{"opacity-0":!h}),children:[s.jsx(v,{size:20}),s.jsx(g,{children:r("Trwa nagrywanie dźwięku...")})]}),s.jsx(b,{className:m({"opacity-0":!a}),children:(e==null?void 0:e.exampleUsedTranslation)&&s.jsxs(i,{className:"mt-1",direction:"row",alignItems:"center",children:[s.jsx(L,{text:e==null?void 0:e.exampleUsedTranslation,trans:f===o?e.translation:e.word}),s.jsx(x,{name:e==null?void 0:e.exampleUsedTranslation,keyCode:t.Four,language:o})]})}),(e==null?void 0:e.exampleUsed)&&s.jsx(g,{className:"mb-2",color:"text.secondary",variant:"body2",align:"center",children:e==null?void 0:e.exampleUsed}),a?s.jsxs(s.Fragment,{children:[s.jsx(p,{keyCode:t.Enter,className:"w-full flex-1",variant:"contained",onClick:()=>{u(),d("")},children:r("Następne słowo")}),s.jsx(p,{className:"mt-1 w-full",variant:"contained",color:"secondary",onClick:()=>{w(),d("")},keyCode:t.S,children:r("Znam to")})]}):s.jsx(i,{className:"w-full",direction:"row",gap:1,children:s.jsx(p,{disabled:h,keyCode:t.Enter,className:"flex-1",variant:"contained",onClick:N,children:r("Nagraj")})})]})})})}):s.jsx(I,{onReset:y})}export{Q as default};
