import{r as t,x as S,j as e,c as R,G as b}from"./index-2TYipm7h.js";import{u as v,F as E,C as I,V as g,K as a,a as m}from"./useWord-Bcu4Y2zZ.js";import{c as P,S as o,T as u}from"./useTranslation-m9jeEm6k.js";import{C as T,a as L}from"./CardContent-BgyhIGdo.js";import{A as W}from"./Alert-Cb0LkIBt.js";import"./IconButton-CgUamlE1.js";import"./createSvgIcon-Bfj9-i3D.js";import"./useSettingsDb-BFx65x8B.js";import"./useSlot-gcT3Ltuz.js";const F=window.SpeechRecognition||window.webkitSpeechRecognition,s=new F;s.continuous=!1;s.interimResults=!1;function D(){const{t:i}=P(),[c,l]=t.useState(!1),[n,x]=t.useState(""),{currentWord:r,nextWord:h,skip:f,check:p,reset:j,lang:d,nativeLang:w,isCorrect:C}=v();console.log(s,"recognition");const y=t.useCallback(()=>{s.start(),s.lang=d===S.En?"en-US":"pl-PL",s.onresult=k=>{const N=k.results[0][0].transcript;x(N)},s.onend=()=>{l(!1)},s.onerror=()=>{l(!1)},s.onstart=()=>{l(!0)}},[d]);return t.useEffect(()=>()=>{s.stop()},[]),t.useEffect(()=>{n&&p(n)},[p,n]),r?e.jsx(I,{maxWidth:"md",children:e.jsx(T,{className:"p-2",children:e.jsx(L,{children:e.jsxs(o,{alignItems:"center",justifyContent:"center",children:[e.jsxs(o,{direction:"row",alignItems:"center",children:[e.jsx(u,{variant:"h2",className:"font-medium",children:r.word}),e.jsx(g,{name:r.word,keyCode:a.One,language:w})]}),e.jsxs(o,{direction:"row",alignItems:"center",className:R("mb-2 h-[45px]",{"opacity-0":!n}),children:[e.jsx(u,{variant:"h5",color:"text.secondary",children:r.translation}),n&&e.jsx(g,{name:r.translation,keyCode:a.Two,language:d,autoPlay:!0})]}),n&&e.jsx(e.Fragment,{children:e.jsx(W,{severity:C?"success":"error",className:"mb-2 h-[56px] w-full xy-center",children:n})}),c&&e.jsxs(o,{gap:1,direction:"row",alignItems:"center",className:"mb-2 h-[56px]",children:[e.jsx(b,{size:20}),e.jsx(u,{children:i("Trwa nagrywanie dźwięku...")})]}),n?e.jsx(m,{keyCode:a.Enter,className:"w-full flex-1",variant:"contained",onClick:()=>{h(),x("")},children:i("Następne słowo")}):e.jsxs(o,{className:"w-full",direction:"row",gap:1,children:[e.jsx(m,{disabled:c,keyCode:a.Space,className:"flex-1",color:"error",variant:"contained",onClick:f,children:i("Pomiń")}),e.jsx(m,{disabled:c,keyCode:a.Enter,className:"flex-1",variant:"contained",onClick:y,children:i("Nagraj")})]})]})})})}):e.jsx(E,{onReset:j})}export{D as default};
