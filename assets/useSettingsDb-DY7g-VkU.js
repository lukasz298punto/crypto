import{r as d,$ as y,F as $,S as x}from"./index-O7jm2W6K.js";import{h,x as _,y as k,z as F,i as p,m as N}from"./map-Cb5YD0IJ.js";function C(){const e=d.useContext(y);if(!e)throw new Error("useDatabaseContext should be used within databaseProvider");return e}var L=h,O=_,S=k;function w(e){return function(t,n,s){var a=Object(t);if(!O(t)){var i=L(n);t=S(t),n=function(r){return i(a[r],r,a)}}var o=e(t,n,s);return o>-1?a[i?t[o]:o]:void 0}}var T=w;function A(e,t,n,s){for(var a=e.length,i=n+(s?1:-1);s?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var D=A,j=/\s/;function E(e){for(var t=e.length;t--&&j.test(e.charAt(t)););return t}var l=E,B=l,M=/^\s+/;function P(e){return e&&e.slice(0,B(e)+1).replace(M,"")}var z=P,G=z,m=F,H=p,I=NaN,J=/^[-+]0x[0-9a-f]+$/i,K=/^0b[01]+$/i,W=/^0o[0-7]+$/i,X=parseInt;function Y(e){if(typeof e=="number")return e;if(H(e))return I;if(m(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=m(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=G(e);var n=K.test(e);return n||W.test(e)?X(e.slice(2),n?2:8):J.test(e)?I:+e}var q=Y,Q=q,g=1/0,R=17976931348623157e292;function U(e){if(!e)return e===0?e:0;if(e=Q(e),e===g||e===-g){var t=e<0?-1:1;return t*R}return e===e?e:0}var V=U,Z=V;function ee(e){var t=Z(e),n=t%1;return t===t?n?t-n:t:0}var te=ee,ne=D,re=h,ae=te,ie=Math.max;function se(e,t,n){var s=e==null?0:e.length;if(!s)return-1;var a=n==null?0:ae(n);return a<0&&(a=ie(s+a,0)),ne(e,re(t),a)}var fe=se,ue=T,de=fe,ce=ue(de),oe=ce;const v=$(oe);function ve(){const[e,t]=d.useState([]),n=C();d.useEffect(()=>{var u;const r=(u=n==null?void 0:n.settings)==null?void 0:u.find().$.subscribe(f=>{t(N(f,c=>c.toJSON()))});return()=>r==null?void 0:r.unsubscribe()},[n]);const s=d.useCallback(async({settings:r,onSuccess:u,onError:f})=>{try{const c=await(n==null?void 0:n.settings.findOne(r.key).exec());c?c.update({$set:{value:r.value}}).then(()=>{u&&u()}).catch(b=>{f&&f(b)}):n==null||n.settings.insert({key:r.key,value:r.value}).then(()=>{u&&u()}).catch(b=>{f&&f(b)})}catch(c){f&&f(c)}},[n]),a=d.useCallback(()=>{var r;return(r=v(e,{key:x.Language}))==null?void 0:r.value},[e]),i=d.useCallback(()=>{var r;return(r=v(e,{key:x.Level}))==null?void 0:r.value},[e]),o=d.useCallback(()=>{var r;return(r=v(e,{key:x.NativeLanguage}))==null?void 0:r.value},[e]);return{settings:e,updateSettings:s,getLanguage:a,getLevel:i,getNativeLanguage:o}}export{C as a,v as f,ve as u};
